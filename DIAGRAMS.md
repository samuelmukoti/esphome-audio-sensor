# ESPHome Beep Detector - Visual Diagrams

## System Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Home Assistant                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Binary Sensor  â”‚  â”‚ Energy Sensor  â”‚  â”‚  Automations   â”‚       â”‚
â”‚  â”‚  (ON/OFF)      â”‚  â”‚  (RMS value)   â”‚  â”‚  (Alerts)      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                  â”‚                   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    ESPHome API (Wi-Fi)
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    M5Stack Atom Echo (ESP32)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  ESPHome Firmware                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚         Beep Detector Component                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Audio   â”‚â†’ â”‚  Signal  â”‚â†’ â”‚Detection â”‚            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Capture  â”‚  â”‚Processingâ”‚  â”‚  Logic   â”‚            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚       â†‘                                                â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚          â”‚                                                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚ â”‚
â”‚  â”‚  â”‚  I2S Driver      â”‚                                        â”‚ â”‚
â”‚  â”‚  â”‚  (ESP32 HAL)     â”‚                                        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚             â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚  SPM1423 MEMS Mic   â”‚ (I2S Digital Microphone)                â”‚
â”‚  â”‚  GPIO22(DATA)       â”‚                                          â”‚
â”‚  â”‚  GPIO33(LR)         â”‚                                          â”‚
â”‚  â”‚  GPIO19(BCLK)       â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
     [Physical Sound Waves]
              â”‚
    ğŸ”Š Water Heater Beeping
```

---

## Data Flow Pipeline

```
Physical Audio (Analog Sound Waves)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SPM1423 MEMS     â”‚  Converts sound â†’ I2S digital
â”‚   Microphone       â”‚  16-bit samples @ 16kHz
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ I2S Serial Data (GPIO22)
          â”‚ BCLK (GPIO19), LRCLK (GPIO33)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32 I2S        â”‚  DMA transfer to memory
â”‚   Peripheral       â”‚  4 x 512 sample buffers
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ int16_t audio_buffer[512]
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DC Removal        â”‚  Remove microphone bias
â”‚  High-pass Filter  â”‚  Remove low freq noise (<100Hz)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Filtered samples
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Window Function   â”‚  Apply Hann/Hamming window
â”‚  (Optional)        â”‚  Reduce spectral leakage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Windowed samples
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚           â”‚
    â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”
â”‚  RMS  â”‚  â”‚Goertzel â”‚  â”‚ FFT â”‚  Feature Extraction
â”‚Energy â”‚  â”‚Algorithmâ”‚  â”‚ 512 â”‚  (Choose ONE method)
â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜
    â”‚           â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Feature Values       â”‚
    â”‚  - Energy: 2500 RMS   â”‚
    â”‚  - Frequency: 1950 Hz â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Detection Criteria   â”‚
    â”‚  âœ“ Energy > 1000      â”‚
    â”‚  âœ“ Freq: 1900-2100 Hz â”‚
    â”‚  âœ“ 3 consecutive hits â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  State Machine        â”‚
    â”‚  - Debounce (200ms)   â”‚
    â”‚  - Min duration       â”‚
    â”‚  - Hysteresis         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Binary Sensor        â”‚
    â”‚  State: ON / OFF      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ ESPHome API
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Home Assistant       â”‚
    â”‚  - Entity update      â”‚
    â”‚  - Automation trigger â”‚
    â”‚  - Notification       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Signal Processing Methods Comparison

### Method 1: RMS Energy Detection

```
Input: [sâ‚, sâ‚‚, sâ‚ƒ, ... sâ‚…â‚â‚‚]  (512 audio samples)
         â”‚
         â–¼
Square:  [sâ‚Â², sâ‚‚Â², sâ‚ƒÂ², ... sâ‚…â‚â‚‚Â²]
         â”‚
         â–¼
Sum:     Î£(sÂ²) = sâ‚Â² + sâ‚‚Â² + ... + sâ‚…â‚â‚‚Â²
         â”‚
         â–¼
Mean:    Î£(sÂ²) / 512
         â”‚
         â–¼
Root:    âˆš(mean) = RMS value
         â”‚
         â–¼
Compare: if (RMS > threshold) â†’ BEEP DETECTED

Pros: âš¡ FAST (0.1ms), ğŸ’¾ Tiny memory
Cons: âŒ No frequency selectivity (detects ALL loud noises)
```

### Method 2: Goertzel Algorithm

```
Input: [sâ‚, sâ‚‚, sâ‚ƒ, ... sâ‚…â‚â‚‚]
         â”‚
         â–¼
Target:  f = 2000 Hz (configure this!)
         â”‚
         â–¼
Coeff:   c = 2 Ã— cos(2Ï€ Ã— 2000 / 16000) = 1.618
         â”‚
         â–¼
Iterate: qâ‚€ = c Ã— qâ‚ - qâ‚‚ + sáµ¢  (for each sample)
         â”‚
         â–¼
Result:  magnitude = âˆš(qâ‚Â² + qâ‚‚Â² - qâ‚Ã—qâ‚‚Ã—c)
         â”‚
         â–¼
Compare: if (magnitude > threshold AND freq matches) â†’ BEEP!

Pros: âœ… Frequency selective, âš¡ Fast (0.5ms)
Cons: âš™ï¸ Must know target frequency beforehand
```

### Method 3: FFT (Fast Fourier Transform)

```
Input: [sâ‚, sâ‚‚, sâ‚ƒ, ... sâ‚…â‚â‚‚]  (time domain)
         â”‚
         â–¼
Window:  Apply Hann: wáµ¢ = 0.5(1 - cos(2Ï€i/512))
         â”‚
         â–¼
FFT:     512-point complex FFT
         â”‚
         â–¼
Result:  [Fâ‚, Fâ‚‚, ... Fâ‚‚â‚…â‚†]  (frequency bins)
         â”‚
         â–¼
Power:   Páµ¢ = âˆš(ReÂ² + ImÂ²)  (for each bin)
         â”‚
         â–¼
Find:    Peak frequency = bin with max power
         â”‚
         â–¼
Compare: if (peak_freq in range AND power > threshold) â†’ BEEP!

Frequency Resolution: 16000 Hz / 512 = 31.25 Hz per bin
Bin 64 = 2000 Hz (for 2kHz beep)

Pros: âœ… Full spectrum, ğŸ” Can find unknown frequencies
Cons: ğŸŒ Slower (15ms), ğŸ’¾ More memory (4KB)
```

---

## Detection State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   IDLE (OFF)    â”‚
                    â”‚  No beep heard  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                   Audio energy analyzed
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
    Energy low          Energy high          Energy medium
        â”‚              Freq matches!              â”‚
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
    Stay IDLE        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        Stay IDLE
                     â”‚ DETECTING(1) â”‚
                     â”‚ Hit count: 1 â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                     Still detected?
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
     Lost it          Continues          Different freq
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Reset count
  â”‚Reset to  â”‚      â”‚ DETECTING(2) â”‚      Back to IDLE
  â”‚  IDLE    â”‚      â”‚ Hit count: 2 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                     Still detected?
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ DETECTING(3) â”‚
                    â”‚ Hit count: 3 â”‚  â† Threshold met!
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                Transition to ON
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ACTIVE     â”‚
                    â”‚  BEEP ON!    â”‚â—„â”€â”€â”€â”€â”
                    â”‚  (Binary     â”‚     â”‚
                    â”‚   Sensor=ON) â”‚     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                           â”‚             â”‚
                   Still detected? â”€â”€â”€â”€â”€â”€â”˜
                    (stays ON)
                           â”‚
                    Lost detection
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  DEBOUNCE    â”‚  Wait 200ms
                    â”‚  Verify gone â”‚  (prevent flicker)
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
    Returns!           Still gone        Brief pause
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
  Back to ACTIVE    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Back to ACTIVE
                    â”‚   IDLE(OFF)  â”‚    (was just breath)
                    â”‚  Binary=OFF  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Memory Layout

```
ESP32 Memory Map (520 KB SRAM total)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP-IDF Kernel (100 KB)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ESPHome Core (80 KB)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Wi-Fi Stack (60 KB)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Application Code (50 KB)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Beep Detector Component:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Audio Buffer (512 samples Ã— 2 bytes) = 1 KB        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  I2S DMA Buffers (4 Ã— 1KB) = 4 KB                   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Processing Buffer (if FFT):                        â”‚ â”‚
â”‚  â”‚    Float32[512] Ã— 2 = 4 KB                          â”‚ â”‚
â”‚  â”‚  OR (if Goertzel):                                  â”‚ â”‚
â”‚  â”‚    12 bytes (q1, q2, coeff)                         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  State Variables = 64 bytes                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Total: 5-9 KB (depending on method)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Free Heap (200+ KB) âœ… Plenty of headroom                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timing Diagram (Real-time Processing)

```
Time â†’
0ms          32ms         64ms         96ms        128ms
â”‚            â”‚            â”‚            â”‚            â”‚
Physical     â”‚            â”‚            â”‚            â”‚
Beep â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€
Starts â–²     â”‚            â”‚            â”‚            â”‚
       â”‚     â”‚            â”‚            â”‚            â”‚
       â”‚     â”‚            â”‚            â”‚            â”‚
I2S    â”‚  â”Œâ”€â”€â–¼â”€â”       â”Œâ”€â”€â–¼â”€â”       â”Œâ”€â”€â–¼â”€â”       â”Œâ”€â”€â–¼â”€â”
Buffer â”‚  â”‚512 â”‚       â”‚512 â”‚       â”‚512 â”‚       â”‚512 â”‚
       â”‚  â”‚smplâ”‚       â”‚smplâ”‚       â”‚smplâ”‚       â”‚smplâ”‚
       â”‚  â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜
       â”‚    â”‚            â”‚            â”‚            â”‚
       â”‚    â”‚0.5ms       â”‚0.5ms       â”‚0.5ms       â”‚0.5ms
Processâ”‚    â–¼            â–¼            â–¼            â–¼
       â”‚  â”Œâ”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”
       â”‚  â”‚Det â”‚       â”‚Det â”‚       â”‚Det â”‚       â”‚Det â”‚
       â”‚  â”‚ 0  â”‚       â”‚ 1  â”‚       â”‚ 2  â”‚       â”‚ 3  â”‚â† Threshold!
       â”‚  â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜       â””â”€â”¬â”€â”€â”˜
       â”‚    â”‚            â”‚            â”‚            â”‚
State  â”‚    â–¼            â–¼            â–¼            â–¼
       â”‚  IDLE        DETECT(1)   DETECT(2)   DETECT(3)
       â”‚                                          â”‚
       â”‚                                          â”‚
       â”‚                                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
Binary â”‚                                    â”‚    ON     â”‚
Sensor â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       â”‚  OFF                                    ON
       â”‚
       â””â”€â”€â–º Total Latency: ~100ms (0â†’96ms + processing)

Key:
- Each 32ms = one audio buffer (512 samples @ 16kHz)
- Processing takes ~0.5ms (Goertzel) per buffer
- Need 3 consecutive detections (96ms) before triggering
- Total beep-to-sensor latency: ~100ms âœ… Acceptable!
```

---

## Component Interaction Sequence

```
User Trigger: Water heater enters error state
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Water Heater  â”‚  Activates piezo buzzer
â”‚    Beeps!     â”‚  Frequency: ~2000 Hz
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  Duration: 500ms, repeating
        â”‚
        â”‚ Sound waves
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Microphone   â”‚  SPM1423 MEMS mic picks up sound
â”‚  (Hardware)   â”‚  Converts to I2S digital signal
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ I2S data stream (GPIO22)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP32 I2S    â”‚  DMA engine fills buffer
â”‚   Driver      â”‚  Interrupt when buffer full
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ audio_buffer[512] ready
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚BeepDetector   â”‚  Component::loop() called
â”‚  Component    â”‚  Reads from I2S buffer
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Preprocessing  â”‚  DC removal, filtering
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Goertzel    â”‚  Compute magnitude @ 2000 Hz
â”‚  Algorithm    â”‚  Result: 2500 (above threshold!)
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ energy=2500, freq=2000
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Detection    â”‚  Check criteria:
â”‚    Logic      â”‚  âœ“ Energy > 1000
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  âœ“ Freq in range
        â”‚          âœ“ 3rd consecutive hit
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚State Machine  â”‚  Transition IDLE â†’ ACTIVE
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  Update binary_sensor = ON
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Binary Sensor  â”‚  Publish state change
â”‚  Component    â”‚  Trigger on_press automation
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ ESPHome API (Wi-Fi)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Home Assistant â”‚  Receive state update
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  binary_sensor.beeping = ON
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Automation   â”‚  Execute actions:
â”‚    Engine     â”‚  - Send notification
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  - Turn on alert light
        â”‚          - Log event
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     User      â”‚  ğŸ“± "Water heater beeping!"
â”‚ Notification  â”‚  Takes action
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Frequency Spectrum Example

```
Typical household audio spectrum during water heater beep:

Power
(dB)
 80 â”‚                    ğŸ”´
 70 â”‚                   â•±â”‚â•²        â† Water heater beep
 60 â”‚                  â•± â”‚ â•²          (2000 Hz)
 50 â”‚        â”Œâ”€â”€â”    â•±  â”‚  â•²
 40 â”‚   â”Œâ”€â”€â”€â”€â”˜  â””â”€â”€â”€â•±   â”‚   â•²â”€â”€â”€â”
 30 â”‚â”€â”€â”€â”˜  HVAC     â”‚   â”‚       â””â”€â”€â”  TV/Music
 20 â”‚   rumble      â”‚   â”‚          â””â”€â”€â”€
 10 â”‚               â”‚   â”‚
  0 â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â–º Frequency
    100 200 500 1K  2K  3K  4K  5K  6K  7K  8K (Hz)

    â†“           â†“              â†“
 Block with  Target        Ignore
 high-pass   frequency     (out of
  filter     detection      range)

Goertzel Configuration:
- target_frequency: 2000 Hz
- frequency_tolerance: 100 Hz (1900-2100 Hz window)
- energy_threshold: 1000 (beep is ~2500, noise is ~500)

Result: âœ… Detects beep, ignores HVAC and TV
```

---

## Decision Tree: Which Processing Method?

```
                  START
                    â”‚
                    â–¼
         Know exact beep frequency?
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚
       YES                      NO
        â”‚                       â”‚
        â–¼                       â–¼
  Frequency stable?      Need to find it?
        â”‚                       â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   YES     NO             YES        NO
    â”‚       â”‚              â”‚          â”‚
    â–¼       â–¼              â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
â”‚GOER-â”‚ â”‚ FFT â”‚       â”‚ FFT â”‚    â”‚ RMS â”‚
â”‚TZEL â”‚ â”‚     â”‚       â”‚     â”‚    â”‚     â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”˜

Best:    Fast,        Full        Simplest,
         accurate     spectrum    any loud
                                  sound

Use when:
GOERTZEL: "Water heater always beeps at 2kHz"
FFT:      "Not sure what frequency, need to detect it"
RMS:      "Just detect ANY loud beep, don't care about pitch"

Example scenarios:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scenario                          â”‚ Recommended Method   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Known 2kHz beep, quiet room       â”‚ Goertzel             â”‚
â”‚ Unknown frequency beep            â”‚ FFT (analyze first)  â”‚
â”‚ Multiple appliances, same freq    â”‚ RMS (location-based) â”‚
â”‚ Noisy environment, specific freq  â”‚ Goertzel + high thr. â”‚
â”‚ Testing/prototyping               â”‚ RMS â†’ FFT â†’ Goertzel â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Calibration Workflow

```
Step 1: Capture Baseline
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Deploy sensor    â”‚
â”‚ Enable logging   â”‚
â”‚ Record 1 hour    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ambient energy:  â”‚
â”‚ Min: 50 RMS      â”‚
â”‚ Max: 300 RMS     â”‚
â”‚ Avg: 120 RMS     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Set threshold = Avg Ã— 5 = 600

Step 2: Trigger Test Beep
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manually trigger â”‚
â”‚ water heater beepâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Monitor logs:    â”‚
â”‚ Energy spike:    â”‚
â”‚ 2400 RMS         â”‚
â”‚ Freq: 1950 Hz    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Update config:
  target_frequency: 1950
  frequency_tolerance: 100
  energy_threshold: 600

Step 3: Validation (24 hours)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Monitor for:     â”‚
â”‚ - False positivesâ”‚
â”‚ - Missed beeps   â”‚
â”‚ - Latency        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    Adjust if needed:
    Too sensitive â†’ Increase threshold
    Not sensitive â†’ Decrease threshold
    Wrong freq â†’ Check FFT logs

Step 4: Production
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Final config     â”‚
â”‚ Disable verbose  â”‚
â”‚ Enable automationsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Home Network                         â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Router   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚     HA       â”‚             â”‚
â”‚  â”‚  (Wi-Fi)   â”‚           â”‚   Server     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚   (Docker)   â”‚             â”‚
â”‚        â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                                                â”‚
â”‚        â”‚  Wi-Fi (2.4 GHz)                              â”‚
â”‚        â”‚                                                â”‚
â”‚        â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚  M5 Atom   â”‚  Placement: Near water heater          â”‚
â”‚  â”‚   Echo     â”‚  Distance: 2-5 meters                  â”‚
â”‚  â”‚            â”‚  Power: USB 5V (wall adapter)          â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚  Status LED: Visual feedback           â”‚
â”‚  â”‚  â”‚ Mic  â”‚  â”‚                                        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚        â”‚ I2S Audio                                      â”‚
â”‚        â”‚                                                â”‚
â”‚        â–¼                                                â”‚
â”‚  [Water Heater]  â† ğŸ”Š Beeping                          â”‚
â”‚   (Physical)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Placement Considerations:
âœ… Within 5m of beep source
âœ… Stable Wi-Fi signal
âœ… Away from HVAC vents (noise)
âœ… Accessible USB power
âŒ Not in enclosed cabinet (muffled)
âŒ Not near TV speakers (interference)
```

---

**End of Diagrams**
